<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roulette</title>

  <!-- Global casino theme -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/header-user.css">

  <!-- Shared bank badge + chip buttons -->
  <link rel="stylesheet" href="blackjack/bank-chip.css?v=dev1">

  <!-- Roulette-specific -->
  <link rel="stylesheet" href="roulette/roulette.css?v=dev1">
  <script src="roulette/roulette.js?v=dev1" defer></script>
</head>

<body class="roulette-page">
  <header class="header">
    <div class="left user-info">
      <img id="headerAvatar" src="assets/avatars/1.png" alt="User avatar">
      <span id="headerUsername" class="username"></span>
    </div>

    <div class="right cluster">
      <button id="backButton" class="back-button btn-secondary btn">⮐ Back to Home</button>
      <span class="badge" id="bankBadge" title="Your chip balance"></span>
    </div>
  </header>

  <main class="container stack">
    <section class="panel">
      <h2 class="panel-header">Roulette</h2>
      <p class="panel-subtle">Place a bet, then spin. Payouts: Straight (35:1), Color/Even/Odd (1:1).</p>

      <div class="roulette-wrap">
          <div class="wheel-card">
              <div class="wheel">
                  <div class="wheel-ring"></div>
                  <div id="rouletteBall" class="ball" aria-hidden="true"></div>

                  <!-- result badge -->
                  <div class="result" id="resultBadge" aria-live="polite">—</div>
              </div>


              <div class="history">
                  <div class="muted">Last spins</div>
                  <div class="history-row" id="historyRow"></div>
              </div>
          </div>

        <div class="bet-card">
          <div class="betting-head">
            <div>
              <h3 class="panel-header">Betting</h3>
              <p class="panel-subtle">Set wager, choose bet, then Spin.</p>
            </div>

            <button class="btn-ghost btn" id="clearBetBtn" title="Clear bet">Clear</button>
          </div>

          <div class="cluster">
            <button class="chip-btn chip-5" data-chip="5" title="+5">+5</button>
            <button class="chip-btn chip-25" data-chip="25" title="+25">+25</button>
            <button class="chip-btn chip-100" data-chip="100" title="+100">+100</button>
          </div>

          <div class="bet-line mt-4">
            <span class="muted">Bet amount:</span>
            <strong id="betAmount">0</strong>
          </div>

          <div class="bet-types mt-4">
            <div class="muted mb-2">Bet type</div>
            <div class="bet-grid">
              <button class="btn-secondary btn bet-btn" data-bet="red">Red (1:1)</button>
              <button class="btn-secondary btn bet-btn" data-bet="black">Black (1:1)</button>
              <button class="btn-secondary btn bet-btn" data-bet="even">Even (1:1)</button>
              <button class="btn-secondary btn bet-btn" data-bet="odd">Odd (1:1)</button>
            </div>

            <div class="straight mt-3">
              <label class="muted" for="numberSelect">Straight (35:1)</label>
              <select id="numberSelect" class="select"></select>
              <button class="btn-secondary btn bet-btn" data-bet="number">Set Number Bet</button>
            </div>

            <div class="mt-3">
              <span class="muted">Selected bet:</span>
              <strong id="selectedBet">—</strong>
            </div>
          </div>

          <div class="mt-4 cluster">
            <button class="btn" id="spinBtn">Spin</button>
            <button class="btn-danger btn" id="resetBankBtn" title="Reset bank to 500">Reset Bank</button>
          </div>

          <div class="toast info mt-4" id="status" aria-live="polite">
            Place your bet to begin.
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">© Roulette</footer>

  <!-- Header identity (same pattern you used elsewhere) -->
  <script>
    (function () {
      const avatar = document.getElementById('headerAvatar');
      const usernameEl = document.getElementById('headerUsername');
      const storedName = localStorage.getItem('bj21.username');
      const storedAvatar = localStorage.getItem('bj21.avatar');
      const username = storedName || `Guest_${Math.floor(1000 + Math.random() * 9000)}`;
      usernameEl.textContent = username;
      localStorage.setItem('bj21.username', username);
      if (storedAvatar) avatar.src = storedAvatar;
      window.addEventListener('storage', (e) => {
        if (e.key === 'bj21.avatar' && e.newValue) { avatar.src = e.newValue; }
      });
    })();
  </script>
</body>
</html>
